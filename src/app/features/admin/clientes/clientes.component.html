<div class="clientes-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">ğŸ‘¥ GestiÃ³n de Clientes</h1>
      <p class="page-subtitle">Administra los clientes registrados en el sistema</p>
    </div>
    <button class="btn-primary" (click)="abrirModalNuevo()" [disabled]="loading">
      â• Nuevo Cliente
    </button>
  </div>

  <!-- Alerts -->
  <div *ngIf="error" class="alert alert-error">
    <span class="alert-icon">âš ï¸</span>
    <span>{{ error }}</span>
    <button class="alert-close" (click)="error = null">âœ•</button>
  </div>

  <div *ngIf="success" class="alert alert-success">
    <span class="alert-icon">âœ“</span>
    <span>{{ success }}</span>
    <button class="alert-close" (click)="success = null">âœ•</button>
  </div>

  <!-- Search and Filter -->
  <div class="search-bar">
    <input
      type="text"
      class="search-input"
      placeholder="ğŸ” Buscar por nombre, apellido o email..."
      [(ngModel)]="searchTerm"
    />
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredClientes.length === 0" class="empty-state">
    <p class="empty-icon">ğŸ“­</p>
    <h3>No hay clientes</h3>
    <p>Comienza creando tu primer cliente</p>
  </div>

  <!-- Table -->
  <div *ngIf="!loading && filteredClientes.length > 0" class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Email</th>
          <th>TelÃ©fono</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cliente of filteredClientes" class="table-row">
          <td class="cell-id">{{ cliente.idCliente }}</td>
          <td class="cell-name">{{ cliente.nombre }}</td>
          <td>{{ cliente.apellido }}</td>
          <td class="cell-email">{{ cliente.email }}</td>
          <td>{{ cliente.telefono || 'â€”' }}</td>
          <td class="cell-actions">
            <button
              class="btn-action btn-edit"
              (click)="abrirModalEditar(cliente)"
              title="Editar"
              [disabled]="loading"
            >
              âœï¸
            </button>
            <button
              class="btn-action btn-delete"
              (click)="eliminar(cliente.idCliente, cliente.nombre)"
              title="Eliminar"
              [disabled]="loading"
            >
              ğŸ—‘ï¸
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal -->
  <div *ngIf="showModal" class="modal-overlay" (click)="cerrarModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ isEditMode ? 'âœï¸ Editar Cliente' : 'â• Nuevo Cliente' }}</h2>
        <button class="btn-close" (click)="cerrarModal()">âœ•</button>
      </div>

      <div class="modal-body">
        <div *ngIf="error" class="alert alert-error">
          <span class="alert-icon">âš ï¸</span>
          <span>{{ error }}</span>
        </div>

        <form (ngSubmit)="guardar()" class="form-grid">
          <div class="form-group">
            <label>Nombre *</label>
            <input
              type="text"
              [(ngModel)]="form.nombre"
              name="nombre"
              placeholder="Juan"
              class="form-input"
            />
          </div>

          <div class="form-group">
            <label>Apellido *</label>
            <input
              type="text"
              [(ngModel)]="form.apellido"
              name="apellido"
              placeholder="PÃ©rez"
              class="form-input"
            />
          </div>

          <div class="form-group full-width">
            <label>Email *</label>
            <input
              type="email"
              [(ngModel)]="form.email"
              name="email"
              placeholder="juan@ejemplo.com"
              class="form-input"
            />
          </div>

          <div class="form-group full-width">
            <label>TelÃ©fono</label>
            <input
              type="tel"
              [(ngModel)]="form.telefono"
              name="telefono"
              placeholder="+57 300 123 4567"
              class="form-input"
            />
          </div>

          <div class="form-group full-width">
            <label>{{ isEditMode ? 'Nueva ContraseÃ±a (opcional)' : 'ContraseÃ±a *' }}</label>
            <div class="password-input-wrapper">
              <input
                [type]="showPassword ? 'text' : 'password'"
                [(ngModel)]="form.password"
                name="password"
                [placeholder]="isEditMode ? 'Dejar vacÃ­o para no cambiar' : 'MÃ­nimo 6 caracteres'"
                class="form-input"
              />
              <button
                type="button"
                class="btn-toggle-password"
                (click)="togglePassword()"
              >
                {{ showPassword ? 'ğŸ‘ï¸â€ğŸ—¨ï¸' : 'ğŸ‘ï¸' }}
              </button>
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button class="btn-secondary" (click)="cerrarModal()">
          Cancelar
        </button>
        <button
          class="btn-primary"
          (click)="guardar()"
          [disabled]="loading"
        >
          {{ isEditMode ? 'ğŸ’¾ Actualizar' : 'â• Crear' }}
        </button>
      </div>
    </div>
  </div>
</div>